<!DOCTYPE html>
<html style="height:100%">
  <head>
    <title>RasterCarve</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/styles.css">
  </head>
  <body style="height:100%">
    <div style="height:100%">
      <div class="split" id="one" style="">
        <div class="container" style="overflow-y:auto;position:relative;">
          <h1>RasterCarve</h1>

          <p>
            This is an experimental web interface to <a href="https://github.com/built1n/rastercarve">RasterCarve</a>, a CNC engraving toolpath generator. To begin, upload an image below. The defaults can be safely kept as they are.
          </p>

          <form method="POST" class="needs-validation" novalidate id="main" action="javascript:void(0);" enctype="multipart/form-data">
            <fieldset>
              <legend>Input & Scaling</legend>
              <div class="form-group">
                <label for="image">
                  Image to engrave:
                </label>
                <div class="custom-file">
                  <input type="file" class="custom-file-input" id="image" name="image" aria-describedby="fileInput" required>
                  <label class="custom-file-label" for="image">Choose an image...</label>
                </div>
              </div>

              <div class="form-group">
                <label for="size">Desired dimension:</label>
                <div class="input-group mb-4">
                  <input type="number" class="form-control" placeholder="Enter value..." min="1" step=".1" max="100" aria-label="Desired dimension" aria-describedby="basic-addon2" name="size" required>
                  <div class="input-group-append">
                    <span class="input-group-text nopad" id="basic-addon2">
                      <select class="btn btn-mini" name="dimension">
                        <option value="width" selected>Width (in)</option>
                        <option value="height">Height (in)</option>
                    </select></span>
                  </div>
                </div>
              </div>
            </fieldset>

            <fieldset>
              <legend>Machine & Tool Options</legend>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="feed">Feed rate:</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" min="1" value="100" aria-label="Feed rate" aria-describedby="basic-addon2" name="feed" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in/min</span>
                    </div>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="plunge">Plunge rate:</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" min="1" value="30" aria-label="Plunge rate" aria-describedby="basic-addon2" name="plunge" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in/min</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="safez">Safe Z height:</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" min=".01" step=".01" value=".1" aria-label="Safe Z height" aria-describedby="basic-addon2" name="safez" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in</span>
                    </div>
                  </div>
                </div>
                <div class="form-group col-md-6">
                  <label for="endz">Ending Z height (for final traverse):</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" min=".1" value="2" step=".1" aria-label="Ending Z height" aria-describedby="basic-addon2" name="endz" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="toolangle">Tool included angle:</label>

                  <div class="input-group mb-3">
                    <input type="number" class="form-control" value="30" min="5" max="179" aria-label="Tool angle" aria-describedby="basic-addon2" name="toolangle" required>
                    <div class="input-group-append">
                      <span class="input-group-text">deg</span>
                    </div>
                  </div>
                </div>
              </div>
            </fieldset>

            <fieldset>
              <legend>Engraving Options</legend>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="depth">Maximum engraving depth (in):</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" value=".080" step=".001" min=".001" aria-label="Engraving depth" aria-describedby="basic-addon2" name="depth" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in</span>
                    </div>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="lineangle">Line angle (above horizontal):</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" value="22.5" min="0" max="89.9" step=".1" aria-label="Line angle" aria-describedby="basic-addon2" name="lineangle" required>
                    <div class="input-group-append">
                      <span class="input-group-text">deg</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="stepover">Stepover/line spacing:</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" min="100" value="120" step="1" aria-label="Stepover" aria-describedby="basic-addon2" name="stepover" required>
                    <div class="input-group-append">
                      <span class="input-group-text">%</span>
                    </div>
                  </div>
                </div>

                <div class="form-group col-md-6">
                  <label for="resolution">Linear resolution:</label>
                  <div class="input-group mb-3">
                    <input type="number" class="form-control" value=".05" min="0.001" step=".001" aria-label="Resolution" aria-describedby="basic-addon2" name="resolution" required>
                    <div class="input-group-append">
                      <span class="input-group-text">in</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mb-4">
                <input id="fakesubmit" type="submit" value="Submit" style="display:none;" />
                <div class="col-lg-6">

<div class="btn-group btn-block">
  <button class="btn btn-secondary btn-block" type="button" id="pbutton">
    Preview
  </button>
  <button type="button" class="btn btn-secondary dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
    <span class="sr-only">Toggle Dropdown</span>
  </button>
  <div class="dropdown-menu">
    <a class="dropdown-item" href="#" id="download-preview">Download as SVG</a>
  </div>
</div>

                  <!--<button id="pbutton" class="btn btn-block btn-secondary" type="submit">Preview</button>-->
                </div>
                <div class="col-lg-6">
                  <button id="gbutton" class="btn btn-block btn-primary" type="submit">Download G-Code</button>
                </div>
              </div>
            </fieldset>
          </form>
          <footer class="text-center">
            Copyright &copy; 2019 <a href="mailto:me@fwei.tk">Franklin Wei</a>.
          </footer>
        </div>
      </div>
      <div class="split" id="two">
        <div id="preview">
          <table class="box">
            <tr>
              <td align="center">
                <span class="text-muted placeholder" id="placeholder"><b>Preview will appear here.</b></span>
              </td>
            </tr>
          </table>
        </div>
      </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.form/4.2.2/jquery.form.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/js/bootstrap.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.5.11/split.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/q.js/1.4.1/q.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/spark-md5/2.0.2/spark-md5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/bluebird/latest/bluebird.core.min.js"></script>
    <script src="http://ariutta.github.io/svg-pan-zoom/dist/svg-pan-zoom.min.js"></script>
    <script src="/js/rastercarve-web.js"></script>
  </body>
</html>
